module ClaudeJr
  VERSION: String
  # See the writing guide of rbs: https://github.com/ruby/rbs#guides
  attr_accessor self.api_key: String

  def self.client: -> ClaudeJr::Client
end
require "faraday"

module ClaudeJr
  class Error < StandardError; end
  class APIError < Error; end

  class Client
    # Constants
    API_URL: String
    API_VERSION: String
    MODEL: String
    MAX_TOKENS: Integer

    # Attribute accessor for Faraday connection
    attr_accessor connection: Faraday::Connection

    # Constructor with keyword argument
    def initialize: (api_key: String) -> void

    # Chat method returns an untyped response or may raise APIError
    def chat: (message: String, model: String, max_tokens: Integer) -> untyped
  end

  # Module-level accessors and factory for Client
  def self.api_key: () -> String?
  def self.api_key=: (String?) -> String?
  def self.client: () -> Client
end
